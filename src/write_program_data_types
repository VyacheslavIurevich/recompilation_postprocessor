'''Dumping program data types'''
#pylint: disable=wrong-import-position
import pyhidra # pylint: disable=import-error
pyhidra.start()
import ghidra # pylint: disable=import-error
from java.io import File, PrintWriter # pylint: disable=import-error

def write_program_data_types(file, monitor):
    """Dumping program data types"""
    dtm = program.getDataTypeManager()
    cfile_writer = PrintWriter(file)
    data_type_writer = ghidra.program.model.data.DataTypeWriter(dtm, cfile_writer, True)
    data_type_writer.write(dtm, monitor)
with pyhidra.open_program("resources/in/test.out") as flat_api:
    program = flat_api.getCurrentProgram()
    f = File("resources/out/test1.c")
    write_program_data_types(f, flat_api.monitor)
